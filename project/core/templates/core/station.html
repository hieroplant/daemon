{% load static %}
{% load static tailwind_tags %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        {% block head_title %}
        Personal Finance Tracker
        {% endblock %}
    </title>
    {% tailwind_css %}
    <script src="{% static 'htmx.min.js' %}" defer></script>
</head>

<body class="bg-gray-700">
    {% include 'core/partials/navbar.html' %}
    <!-- Sidebar -->
    <div class="drawer lg:drawer-open flex">
        <input id="my-drawer-2" type="checkbox" class="drawer-toggle" />
        {% include 'core/partials/sidebarstation.html' with project_id=project.id %}
        <div class="drawer-content flex flex-col mt-10 ml-20 w-full">
            <!-- Main content area -->
            <div class="overflow-x-auto flex flex-col items-center">
                <h2 class="text-3xl text-white mb-4">{{ project.name }}</h2>
                <table class="table w-full max-w-5xl bg-gray-700">
                    <thead>
                        <tr class="text-white h-12">
                            <th>#</th>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% if stations %}
                            {% for station in stations %}
                            <tr class="hover:bg-gray-600 text-white h-12">
                                <td>{{ forloop.counter }}</td>
                                <td>{{ station.name }}</td>
                                <td>{{ station.description }}</td>
                                <td>
                                    <div class="flex items-center">
                                        <form method="POST" action="{% url 'delete_station' station.id %}"
                                            onsubmit="return confirm('Are you sure you want to delete this station?');" hx-delete
                                            hx-target="#station{{ station.id }}" hx-swap="outerHTML" class="mr-2">
                                            {% csrf_token %}
                                            <button type="submit" class="text-red-400 hover:text-red-600">
                                                {% heroicon_outline "trash" %}
                                            </button>
                                        </form>
                                        <form method="GET" action="{% url 'view_station' station.id %}" style="display:inline;">
                                            <button type="submit" class="text-blue-400 hover:text-blue-600">
                                                {% heroicon_outline "folder-plus" %}
                                            </button>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        {% else %}
                            <tr class="text-white h-12">
                                <td colspan="4" class="text-center">No stations available.</td>
                            </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
</html>